<?php
//be sure to leave no white space before and after the php portion of this file
//headers must remain open after this file is included

//////////////////////////////////////////////////////////////////////////
//									//
//  include.avalanche.php							//
//----------------------------------------------------------------------//
//  initializes the avalanche's class object				//
//									//
//////////////////////////////////////////////////////////////////////////

class avalanche_class{

	// $allSkins - an array holding the instances of each installed skin class
	var $_allSkins;

	// $_defaultSkin - an instance of the default loaded skin's class
	var $_defaultSkin;

	// $_defaultSkin - an instance of the currently loaded skin's class
	var $_currentSkin;

	//////////////////////////////////////////////////////////
	// adds a skin to avalanche's skin list
	// $skn must be a string of the installation folder
	// of the new skin
	//////////////////////////////////////////////////////////
	function addSkin($skn){
		$this->_allSkins[]=$skn;
	}
	//////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////



	//////////////////////////////////////////////////////////
	// returns the installation folder of the
	// current skin avalanche is using.
	//////////////////////////////////////////////////////////
	function currentSkin(){
		return $this->_currentSkin;
	}
	//////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////


	//////////////////////////////////////////////////////////
	// returns the installation folder of the
	// default skin avalanche is using
	//////////////////////////////////////////////////////////
	function defaultSkin(){
		return $this->_defaultSkin;
	}
	//////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////




	//////////////////////////////////////////////////////////
	// returns the number of skins in avalanche's skin list
	//////////////////////////////////////////////////////////
	function getSkinCount(){
		return count($this->_allSkins);
	}
	//////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////

	//////////////////////////////////////////////////////////
	// returns the indexth skin
	// static indexing and order is only guarenteed for
	// this page load
	//////////////////////////////////////////////////////////
	function getSkinAt($index){
		return $this->_allSkins[$index];
	}
	//////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////


	//////////////////////////////////////////////////////////
	// returns the skin that is installed in the $skn folder
	//////////////////////////////////////////////////////////
	function getSkin($skn){
		//input: $skn - the installation folder of the skin to find
		//output: the skin object in the $skn folder if found
		//output: false if not found
		for($i = 0; $i < $this->getSkinCount(); $i++){
			$currSkn = $this->getSkinAt($i);
			if($currSkn->folder()==$skn){
				return $currSkn;
			}
		}
		return false;
	}
	//////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////


	//////////////////////////////////////////////////////////
	// should only call once at beginning of page load.
	// initializes avalanche variables
	//  - _recent_log_in
	//  - _allModules
	//  - _allSkins
	//  - _defaultSkin
	//  - _currentSkin
	//////////////////////////////////////////////////////////
	function init(){
		$this->_allSkins = array();

		include "skins/template/skin.template.php";
		include "skins/default/skin.default.php";
		include "skins/buffer/skin.buffer.php";
		include "skins/installer/skin.installer.php";


		$this->_defaultSkin = "installer";
		$this->_currentSkin = $this->_defaultSkin;
	}
	//////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////


	//////////////////////////////////////////////////////////
	// sets the current skin of avalanche if $argSkin is
	// installed
	// returns true;
	//////////////////////////////////////////////////////////
	function setSkin($argSkin){
		if(skinInstalledHuh($argSkin)){
			$this->_currentSkin = $argSkin;
			return true;
		}else{
			return false;
		}
	}
	//////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////


	//////////////////////////////////////////////////////////
	// checks to see if $argSkn is installed or not
	// returns true if $argSkn is installed
	// returns false otherwise
	//////////////////////////////////////////////////////////
	function skinInstalledHuh($argSkin){
		$count = $this->getSkinCount();
		for($i=0; $i < $count; $i++){
			$tempSkin = $this->getSkinAt($i);
			if($argSkin==$tempSkin->folder()){
				return true;
			}
		}
		return false;
	}
	//////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////
}

$avalanche = new avalanche_class;
$avalanche->init();
?>